(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b9fa106"],{"1d8d":function(e,t,i){"use strict";i("f2b3")},f2b3:function(e,t,i){},f440:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card shadow-sm bg-light lt border-0 p-3"},[i("div",{staticClass:"media",class:{"media-vs":!e.isAudioLayout}},[e.isAudioLayout?e.isAudioLayout&&!e.similarImageUrl?i("div",{staticClass:"media-wrapper mr-3"},[i("a",[i("font-awesome-icon",{staticClass:"text-muted",attrs:{icon:["fas","file-audio"],"fixed-width":"",size:"3x"}})],1)]):e._e():i("div",{staticClass:"media-wrapper mr-3"},[e.similarImageUrl?i("a",[i("img",{attrs:{src:e.similarImageUrl}})]):i("a",[i("font-awesome-icon",{staticClass:"text-muted",attrs:{icon:["fas","file-image"],"fixed-width":"",size:"3x"}})],1)]),i("div",{staticClass:"media-body"},[i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(t){return e.cancelSimilarImageFilter()}}},[i("span",{attrs:{"aria-hidden":"true"}},[i("font-awesome-icon",{attrs:{icon:["fas","times"],"fixed-width":""}})],1)]),i("h6",[i("font-awesome-icon",{attrs:{icon:["fas","me-search-ai"],"fixed-width":""}}),e._v("\n          "+e._s(e.$t("search.similar_mediatype_result",{0:e.$term("mediaType",e.currentMediaTypeCode).short().text()}))+"\n        ")],1),i("p",{staticClass:"mb-0 small text-muted"},[i("a",{attrs:{href:e.similarElementUrl}},[e._v(e._s(e.name))])]),e.isAudioLayout&&e.similarImageUrl?i("a",[i("img",{staticClass:"img-waveform",attrs:{src:e.similarImageUrl}})]):e._e()])])])},a=[],s=i("94ea"),n=i("7201"),l=i("893a");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){u(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function u(e,t,i){return t=h(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h(e){var t=d(e,"string");return"symbol"===c(t)?t:String(t)}function d(e,t){if("object"!==c(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var f={name:"search-similar",data:function(){return{isSearching:!1,isModal:!1,elementId:"",elementData:{},isFirst:!1,isLast:!1,matchBy:null,isAural:!1,isVisual:!1,matchByElement:null,acceptedImageExtensions:["jpg","jpeg","png","gif"]}},computed:m(m(m({},Object(s["d"])({currentMediaTypeCode:function(e){return e.search.mediaType},filters:function(e){return e.search.filter},mediaType:function(e){return e.search.mediaType}})),Object(s["c"])({currentPage:"search/currentPage",perPage:"search/perPage",totalCount:"search/totalCount",asideElements:"search/allSearchAsideElements",hasAsideElements:"search/hasAsideElements",hasCrossSellElements:"search/hasCrossSellElements",searchKeyword:"search/keyword"})),{},{similarValue:function(){return _.get(this.filters,"similar")},isAppliedSimilar:function(){return!!_.get(this.filters,"similar")},name:function(){var e="";switch(this.matchBy){case"file":e=this.isAural?this.similarValue.split("-").pop():this.similarValue.substring(this.similarValue.lastIndexOf("/")+1);break;case"element":e=_.get(this.matchByElement,"name")||"";break;default:return""}return _.truncate(e,{length:48})},similarElementUrl:function(){switch(this.matchBy){case"element":return _.get(this.matchByElement,"html.url",null);default:return null}},similarImageUrl:function(){var e;switch(this.matchBy){case"file":var t=this.similarValue;if(t){var i=t.split(".").pop();if(this.acceptedImageExtensions.includes(i))return t}return null;case"element":return"music"===_.get(this.matchByElement,"mediaType")?_.get(this.matchByElement,"previews.png.url"):(e=_.get(this.matchByElement,"thumbnails.jpg.url"),this.getImageDimension(e),e);default:return null}},isNormalLayout:function(){return!this.isAudioLayout},isAudioLayout:function(){return Object(n["e"])("audio",this.currentMediaTypeCode)}}),beforeDestroy:function(){this.$store.commit("search/resetSimilar"),this.$store.commit("search/setSimilarToProduct",null)},methods:{getImageDimension:function(e){var t=this;this.$store.commit("search/setSimilarImageUrl",e);var i=new Image;i.addEventListener("load",(function(){var e={width:i.width,height:i.height};t.$store.commit("search/setSimilarImageMeta",e)})),i.src=e},init:function(){var e=this,t=this.similarValue,i=new RegExp("^[0-9]{5,10}$"),r=i.test(t);if(r){this.matchBy="element";var a=t;Object(l["a"])(a,{"fields[element]":"name,mediaType,previews,thumbnails,url,artist"}).then((function(t){e.$store.commit("search/setSimilarToProduct",t.data.data),e.matchByElement=t.data.data}))}var s=new RegExp("^(http|https)(.*)(".concat(this.acceptedImageExtensions.join("|"),")$"),"i"),n=new RegExp("^et-(.*)","i");s.test(t)?(this.isVisual=!0,this.isAural=!1,this.matchBy="file"):n.test(t)&&(this.isVisual=!1,this.isAural=!0,this.matchBy="file")},cancelSimilarImageFilter:function(){var e=m({},this.filters);delete e.similar,this.$store.dispatch("search/setFilter",e);var t=m(m({},this.$route.query),{},{page:1});delete t.similar,delete t.similar_face_id,delete t.similar_type,"view-search-similar"!==this.$route.name?this.$router.push({query:t}):this.$router.push({path:"/search/".concat(this.mediaType.replace("_","-")),query:t})}},watch:{similarValue:{handler:function(){this.init()},immediate:!0}}},p=f,y=(i("1d8d"),i("2877")),g=Object(y["a"])(p,r,a,!1,null,"ed577f7c",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-6b9fa106.a4952053.js.map